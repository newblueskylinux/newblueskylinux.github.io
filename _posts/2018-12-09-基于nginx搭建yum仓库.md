---
layout: post
title:  "基于Nginx搭建yum仓库"
date: 2018-12-9 14:50:53
categories: Linux
tags: nginx yum
author: 郑禹
---

* content
{:toc}

### 1.下载阿里云镜像repo文件

项目使用CentOS6系统，因此我下载的文件是：





### 2.刷新缓存

yum clean all yum makecache




### 3.yum repolist

[root@localhost yum.repos.d]# yum repolist 已加载插件：fastestmirror, security Loading mirror speeds from cached hostfile  * base: mirrors.aliyun.com  * extras: mirrors.aliyun.com  * updates: mirrors.aliyun.com 仓库标识仓库名称状态 baseCentOS-6 - Base - mirrors.aliyun.com6,706 extras  CentOS-6 - Extras - mirrors.aliyun.com 46 updates CentOS-6 - Updates - mirrors.aliyun.com   826 repolist: 7,778

### 4.同步镜像到本地

cd /yumrepo/centos/7

reposync -r base reposync -r extras reposync -r updates

reposync -r epel

### 5.创建YUM仓库

yum install createrepo yum-utils -y cd /yumrepo/centos/7 createrepo ./base createrepo ./extras createrepo ./updates

createrepo ./epel

### 6.安装nginx，搭建本地Web服务器

内容省略...

贴上配置文件nginx.conf:

server {     listen       80;     server_name  localhost;     root /yumrepo;     #charset koi8-r;      #access_log  logs/host.access.log  main;      location / {         autoindex on;         autoindex_exact_size off;         autoindex_localtime on;     }

### 7.其他服务器连接YUM仓库：

vim /etc/yum.repos.d/yumserver.repo [base]

name=CentOS-Base(GDS)

baseurl=http://10.0.26.138:8080/centos/7/base

path=/

enabled=1

gpgcheck=0

[updates]

name=CentOS-Updates(GDS)

baseurl=http://10.0.26.138:8080/centos/7/updates

path=/

enabled=1

gpgcheck=0

[extras]

name=CentOS-Extras(GDS)

baseurl=http://10.0.26.138:8080/centos/7/extras

path=/

enabled=1

gpgcheck=0

[epel]

name=CentOS-Epel(GDS)

baseurl=http://10.0.26.138:8080/centos/7/epel

path=/

enabled=1

gpgcheck=0

### 8.完工！

上面的3个base，extras，updates下载到本地是11GB